<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        discord: {
                            bg: '#36393f',
                            sidebar: '#2f3136',
                            element: '#202225',
                            accent: '#7289da',
                            green: '#43b581',
                            red: '#f04747',
                            gray: '#b9bbbe'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Uni+Sans:wght@400;700&display=swap');

        /* Mocking Discord font feel */
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>

<body class="bg-discord-bg text-white h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">

    <!-- BACKGROUND LAYER -->
    <div id="background-layer" class="fixed inset-0 z-0 pointer-events-none"></div>

    <!-- MAIN CONTENT WRAPPER -->
    <div class="relative z-10 w-full max-w-md flex flex-col items-center justify-center">

    <!-- LOGIN SCREEN -->
    <div id="screen-login" class="w-full bg-discord-element p-8 rounded-lg shadow-xl">
        <h1 class="text-3xl font-bold mb-6 text-center text-discord-accent">Impostor</h1>
        <div class="space-y-4">
            <div>
                <label class="block text-xs font-bold text-discord-gray uppercase mb-2">Nick</label>
                <input type="text" id="input-name"
                    class="w-full bg-discord-sidebar p-3 rounded text-white focus:outline-none focus:ring-2 focus:ring-discord-accent"
                    placeholder="Twoja nazwa">
            </div>
            <div>
                <label class="block text-xs font-bold text-discord-gray uppercase mb-2">Kod Pokoju</label>
                <input type="text" id="input-room"
                    class="w-full bg-discord-sidebar p-3 rounded text-white focus:outline-none focus:ring-2 focus:ring-discord-accent"
                    placeholder="Zostaw puste by utworzyć nowy">
            </div>
            <button id="btn-join"
                class="w-full bg-discord-accent hover:bg-blue-600 text-white font-bold py-3 rounded transition duration-200">Dołącz
                do Gry</button>
        </div>
    </div>

    <!-- LOBBY SCREEN -->
    <div id="screen-lobby" class="hidden w-full max-w-md bg-discord-element p-8 rounded-lg shadow-xl">
        <h2 class="text-2xl font-bold mb-2 text-center text-white">Lobby: <span id="lobby-code"
                class="text-discord-accent select-all"></span></h2>
        <p class="text-center text-discord-gray text-sm mb-6">Oczekiwanie na graczy...</p>

        <div class="bg-discord-sidebar p-4 rounded mb-6 min-h-[150px]">
            <h3 class="text-xs font-bold text-discord-gray uppercase mb-3">Gracze</h3>
            <ul id="lobby-list" class="space-y-2">
                <!-- Player list injected here -->
            </ul>
        </div>

        <div id="host-controls" class="hidden space-y-4 border-t border-discord-bg pt-4">
            <h3 class="text-xs font-bold text-discord-gray uppercase mb-2">Panel Hosta</h3>

            <div class="flex space-x-2 mb-4">
                <button id="mode-a-btn"
                    class="flex-1 bg-discord-sidebar hover:bg-discord-bg text-white py-2 rounded text-sm font-semibold transition ring-2 ring-discord-accent">Tryb
                    A (Losowy)</button>
                <button id="mode-b-btn"
                    class="flex-1 bg-discord-sidebar hover:bg-discord-bg text-discord-gray py-2 rounded text-sm font-semibold transition">Tryb
                    B (Własny)</button>
            </div>

            <div id="custom-word-area" class="hidden">
                <label class="block text-xs font-bold text-discord-gray uppercase mb-2">Sekretne Słowo</label>
                <input type="text" id="input-custom-word"
                    class="w-full bg-discord-sidebar p-3 rounded text-white focus:outline-none focus:ring-2 focus:ring-discord-accent"
                    placeholder="Wpisz słowo...">
            </div>

            <button id="btn-start"
                class="w-full bg-discord-green hover:bg-green-600 text-white font-bold py-3 rounded transition duration-200">Start
                Gry</button>
        </div>

        <div id="waiting-msg" class="hidden text-center text-discord-gray italic">Czekam na hosta...</div>
    </div>

    <!-- GAME SCREEN -->
    <div id="screen-game" class="hidden w-full max-w-md bg-discord-element p-8 rounded-lg shadow-xl text-center">
        <h2 class="text-2xl font-bold mb-6 text-white">Przydzielono Rolę</h2>

        <div class="relative bg-discord-sidebar p-8 rounded-lg mb-8 cursor-pointer group" id="card-reveal">
            <div id="card-hidden"
                class="absolute inset-0 bg-discord-sidebar rounded-lg flex items-center justify-center border-2 border-dashed border-discord-gray">
                <span
                    class="text-discord-gray font-bold uppercase tracking-wider group-hover:text-white transition">Kliknij
                    by odkryć</span>
            </div>

            <div id="card-content" class="hidden opacity-0 transition-opacity duration-300">
                <h3 id="role-title" class="text-xl font-bold mb-2 uppercase tracking-wide"></h3>
                <p id="role-desc" class="text-lg text-discord-gray"></p>
            </div>
        </div>

        <button id="btn-call-meeting"
            class="w-full bg-discord-red hover:bg-red-600 text-white font-bold py-3 rounded transition duration-200 uppercase tracking-wide">Zwołaj
            Zebranie</button>
    </div>

    <!-- VOTING SCREEN -->
    <div id="screen-voting" class="hidden w-full max-w-md bg-discord-element p-8 rounded-lg shadow-xl">
        <h2 class="text-2xl font-bold mb-2 text-center text-white">Nadzwyczajne Zebranie!</h2>
        <p class="text-center text-discord-red font-bold text-sm mb-6 blinking">GŁOSOWANIE TRWA</p>

        <div class="bg-discord-sidebar p-4 rounded mb-6">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-xs font-bold text-discord-gray uppercase">Kto jest Impostorem?</h3>
                <span id="vote-count" class="text-xs font-bold text-discord-accent">0/0 głosów</span>
            </div>

            <div id="voting-list" class="space-y-2">
                <!-- Voting list -->
            </div>
        </div>

        <p class="text-center text-xs text-discord-gray">Przedyskutujcie i zagłosujcie.</p>
    </div>

    <!-- RESULTS SCREEN -->
    <div id="screen-results" class="hidden w-full max-w-md bg-discord-element p-8 rounded-lg shadow-xl text-center">
        <h2 id="result-title" class="text-3xl font-bold mb-4 text-white"></h2>

        <div class="bg-discord-sidebar p-6 rounded mb-8 space-y-4">
            <div>
                <p class="text-xs font-bold text-discord-gray uppercase">Sekretne Słowo</p>
                <p id="result-word" class="text-xl text-discord-accent font-bold"></p>
            </div>
            <div>
                <p class="text-xs font-bold text-discord-gray uppercase">Impostorem Był</p>
                <p id="result-impostor" class="text-xl text-discord-red font-bold"></p>
            </div>
            <div>
                <p class="text-xs font-bold text-discord-gray uppercase">Wyrzucony</p>
                <p id="result-ejected" class="text-lg text-white"></p>
            </div>
        </div>

        <button id="btn-lobby"
            class="w-full bg-discord-accent hover:bg-blue-600 text-white font-bold py-3 rounded transition duration-200">Powrót
            do Lobby</button>
    </div>

    </div> <!-- END MAIN CONTENT WRAPPER -->

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>

</html>